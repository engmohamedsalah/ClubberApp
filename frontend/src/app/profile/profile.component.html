<div class="max-w-md mx-auto mt-10 p-6 bg-white rounded shadow">
  <h2 class="text-2xl font-bold mb-6">Profile</h2>

  <div *ngIf="!loading && user">
    <div class="mb-6">
      <span class="block text-gray-700 mb-2">Username</span>
      <div class="w-full px-3 py-2 border rounded bg-gray-100 text-gray-700 font-semibold">{{ user.username }}</div>
    </div>

    <form [formGroup]="passwordForm" (ngSubmit)="onChangePassword()">
      <div class="mb-4">
        <label class="block text-gray-700 mb-2" for="oldPassword">Old Password</label>
        <input id="oldPassword" type="password" formControlName="oldPassword" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900" />
        <div *ngIf="passwordForm.get('oldPassword')?.invalid && passwordForm.get('oldPassword')?.touched" class="text-red-500 text-sm mt-1">
          Old password is required.
        </div>
      </div>
      <div class="mb-4">
        <label class="block text-gray-700 mb-2" for="newPassword">New Password</label>
        <input id="newPassword" type="password" formControlName="newPassword" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900" />
        <div *ngIf="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched" class="text-red-500 text-sm mt-1">
          New password is required (min 6 chars).
        </div>
      </div>
      <div class="mb-4">
        <label class="block text-gray-700 mb-2" for="confirmPassword">Confirm New Password</label>
        <input id="confirmPassword" type="password" formControlName="confirmPassword" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900" />
        <div *ngIf="passwordForm.get('confirmPassword')?.invalid && passwordForm.get('confirmPassword')?.touched" class="text-red-500 text-sm mt-1">
          Please confirm your new password.
        </div>
      </div>
      <button type="submit" [disabled]="passwordForm.invalid || loading" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-500 disabled:opacity-50">
        Change Password
      </button>
      <div *ngIf="success" class="text-green-600 mt-4">Password changed successfully!</div>
      <div *ngIf="error" class="text-red-600 mt-4">{{ error }}</div>
    </form>
  </div>

  <div *ngIf="loading" class="flex justify-center items-center h-32">
    <span>Loading...</span>
  </div>
</div>
